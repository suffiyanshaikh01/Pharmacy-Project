package com.pharmacyMedicineSupply.demo.controller;


import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Autowired;

import com.pharmacyMedicineSupply.demo.model.MedicineDemand;
import com.pharmacyMedicineSupply.demo.model.PharmacyMedicineSupply;

import lombok.extern.slf4j.Slf4j;

@RunWith(SpringRunner.class)
@SpringBootTest
@Slf4j
@AutoConfigureMockMvc
public class PharmacyMedicineSupplyControllerTest {

	@Autowired
	PharmacySupplyController pharmacyController;
	@Mock
	MedicineDemand medDemandPositive,medDemandNegative;
	
	@Before
	public void setup() {
		log.info("START");
		 medDemandPositive.setMedicineDemandId(1);
		 medDemandPositive.setMedicineName("Crocin");
		 medDemandPositive.setDemandCount(20);
		 medDemandPositive.setStatus("");
		 medDemandNegative.setMedicineDemandId(1);
		 medDemandNegative.setMedicineName("XYZ");
		 medDemandNegative.setDemandCount(20);
		 medDemandNegative.setStatus("");
		log.info("END");
	}
	
	@Test
	public void testGetPharmacySupplyPositiveCase() {
		log.info("testGetPharmacySupplyPositiveCase START");
		ResponseEntity<List<PharmacyMedicineSupply>> pharmacySupply = pharmacyController.getPharmacySupply(medDemandPositive);
		assertEquals(HttpStatus.OK, pharmacySupply.getStatusCode());
		assertNotNull(pharmacySupply.getBody());
		log.info("testGetPharmacySupplyPositiveCase END");
	}
	
	@Test
	public void testGetPharmacySupplyNeagtiveCase() {
		log.info("testGetPharmacySupplyNeagtiveCase START");
		ResponseEntity<List<PharmacyMedicineSupply>> pharmacySupply = pharmacyController.getPharmacySupply(medDemandNegative);
		assertNotEquals(HttpStatus.INTERNAL_SERVER_ERROR, pharmacySupply.getStatusCode());
		assertNull(pharmacySupply.getBody());
		log.info("testGetPharmacySupplyNeagtiveCase END");
	}
}





















